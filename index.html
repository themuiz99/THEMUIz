<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>เครื่องมือลบสัญลักษณ์</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
            color: #f0f0f0;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        .container {
            width: 95%;
            max-width: 800px;
            padding: 1rem;
            margin: 0.5rem 0;
            max-height: 98vh;
            background-color: #1c1c1c;
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        .input-group {
            position: relative;
            display: flex;
            flex-direction: column;
        }
        .textarea {
            width: 100%;
            padding: 0.75rem;
            border-radius: 0.5rem;
            background-color: #2d2d2d;
            border: 1px solid #3d3d3d;
            color: #f0f0f0;
            font-size: 0.875rem;
            resize: none;
            height: 140px;
            flex-shrink: 0;
        }
        .textarea:focus {
            outline: none;
            border-color: #63b3ed;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.5);
        }
        .textarea[readonly] {
            cursor: default;
            overflow-y: auto;
        }
        /* Counter styling */
        .char-counter {
            text-align: right;
            font-size: 0.7rem;
            color: #718096;
            margin-top: 0.25rem;
            padding-right: 0.25rem;
        }
        .btn-container {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        .btn {
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: bold;
            transition: all 0.3s ease-in-out;
            cursor: pointer;
            flex-grow: 1;
            min-width: 120px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            border: none;
        }
        .btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.5);
        }

        .btn-copy {
            background-image: linear-gradient(to right, #4F46E5, #3B82F6);
            color: #ffffff;
        }
        .btn-clear {
            background-image: linear-gradient(to right, #EF4444, #F97316);
            color: #ffffff;
        }
        .btn-link {
            background-image: linear-gradient(to right, #10B981, #06B6D4);
            color: #1a202c;
        }
        
        .btn-toggle-off {
            background-color: #4a5568;
            color: #f0f0f0;
        }
        .btn-toggle-on {
            background-image: linear-gradient(to right, #F59E0B, #F97316);
            color: #1a202c;
        }
        .btn-toggle-all-on {
            background-image: linear-gradient(to right, #8B5CF6, #D946EF);
            color: #ffffff;
        }

        .message-box {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background-color: #10B981;
            color: #1a202c;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            z-index: 10;
        }
        .message-box.show {
            opacity: 1;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">
    <div class="container">
        <h1 class="text-3xl font-bold text-center mb-2 text-yellow-400">เครื่องมือลบสัญลักษณ์</h1>
        
        <!-- Input Section -->
        <div class="input-group">
            <label for="inputText" class="block mb-1 text-sm font-medium">วางข้อความต้นฉบับที่นี่:</label>
            <textarea id="inputText" class="textarea" placeholder="วางข้อความที่มีสัญลักษณ์และเครื่องหมาย..."></textarea>
            <div id="inputCount" class="char-counter">0 ตัวอักษร</div>
        </div>
        
        <!-- Output Section -->
        <div class="input-group">
            <label for="outputText" class="block mb-1 text-sm font-medium">ผลลัพธ์:</label>
            <textarea id="outputText" class="textarea" readonly placeholder="ผลลัพธ์จะแสดงที่นี่..."></textarea>
            <div id="outputCount" class="char-counter">0 ตัวอักษร</div>
        </div>
        
        <!-- Buttons -->
        <div class="btn-container">
            <button id="toggleRefsBtn" class="btn btn-toggle-off">ลบแหล่งอ้างอิง: ปิด</button>
            <button id="toggleSymbolsBtn" class="btn btn-toggle-off">ลบสัญลักษณ์: ปิด</button>
            <button id="toggleAllBtn" class="btn btn-toggle-off">ลบทุกอย่าง: ปิด</button>

            <button id="copyBtn" class="btn btn-copy">คัดลอกผลลัพธ์</button>
            <button id="clearBtn" class="btn btn-clear">ล้างข้อความ</button>
            
            <a href="https://themuiz99.github.io/Count-the-letters/" class="btn btn-link">นับตัวอักษร</a>
        </div>

        <div id="messageBox" class="message-box">คัดลอกแล้ว!</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const inputTextarea = document.getElementById('inputText');
            const outputTextarea = document.getElementById('outputText');
            const inputCount = document.getElementById('inputCount');
            const outputCount = document.getElementById('outputCount');
            const copyButton = document.getElementById('copyBtn');
            const clearButton = document.getElementById('clearBtn');
            const toggleRefsBtn = document.getElementById('toggleRefsBtn');
            const toggleSymbolsBtn = document.getElementById('toggleSymbolsBtn');
            const toggleAllBtn = document.getElementById('toggleAllBtn');
            const messageBox = document.getElementById('messageBox');

            let isReferenceRemovalEnabled = false;
            let isSymbolRemovalEnabled = false;
            let isRemoveAllEnabled = false;

            function removeSymbols(text) {
                const allowedSymbolsRegex = /[^a-zA-Z0-9\u0E00-\u0E7F\s()+\-×%=“”,.@"']/g;
                return text.replace(allowedSymbolsRegex, '');
            }

            function removeStrictEverything(text) {
                return text.replace(/[^a-zA-Z0-9\u0E00-\u0E7F]/g, '');
            }

            function processText() {
                let originalText = inputTextarea.value;
                let processedText = originalText;
                
                // Update input count
                inputCount.textContent = `${originalText.length} ตัวอักษร`;

                if (isRemoveAllEnabled) {
                    processedText = removeStrictEverything(processedText);
                } else {
                    if (isReferenceRemovalEnabled) {
                        processedText = processedText.replace(/\s*\[\d+\]/g, '');
                    }
                    if (isSymbolRemovalEnabled) {
                        processedText = removeSymbols(processedText);
                    }
                }

                outputTextarea.value = processedText;
                // Update output count
                outputCount.textContent = `${processedText.length} ตัวอักษร`;
            }

            function toggleReferenceRemoval() {
                isReferenceRemovalEnabled = !isReferenceRemovalEnabled;
                updateToggleUI(toggleRefsBtn, isReferenceRemovalEnabled, 'ลบแหล่งอ้างอิง');
                processText();
            }

            function toggleSymbolRemoval() {
                isSymbolRemovalEnabled = !isSymbolRemovalEnabled;
                updateToggleUI(toggleSymbolsBtn, isSymbolRemovalEnabled, 'ลบสัญลักษณ์');
                processText();
            }

            function toggleAllRemoval() {
                isRemoveAllEnabled = !isRemoveAllEnabled;
                if (isRemoveAllEnabled) {
                    toggleAllBtn.textContent = 'ลบทุกอย่าง: เปิด';
                    toggleAllBtn.classList.remove('btn-toggle-off');
                    toggleAllBtn.classList.add('btn-toggle-all-on');
                } else {
                    toggleAllBtn.textContent = 'ลบทุกอย่าง: ปิด';
                    toggleAllBtn.classList.remove('btn-toggle-all-on');
                    toggleAllBtn.classList.add('btn-toggle-off');
                }
                processText();
            }

            function updateToggleUI(btn, state, label) {
                if (state) {
                    btn.textContent = `${label}: เปิด`;
                    btn.classList.remove('btn-toggle-off');
                    btn.classList.add('btn-toggle-on');
                } else {
                    btn.textContent = `${label}: ปิด`;
                    btn.classList.remove('btn-toggle-on');
                    btn.classList.add('btn-toggle-off');
                }
            }

            inputTextarea.addEventListener('input', processText);
            toggleRefsBtn.addEventListener('click', toggleReferenceRemoval);
            toggleSymbolsBtn.addEventListener('click', toggleSymbolRemoval);
            toggleAllBtn.addEventListener('click', toggleAllRemoval);

            copyButton.addEventListener('click', () => {
                if (outputTextarea.value) {
                    const textarea = document.createElement('textarea');
                    textarea.value = outputTextarea.value;
                    textarea.style.position = 'fixed'; 
                    document.body.appendChild(textarea);
                    textarea.select();
                    try {
                        document.execCommand('copy');
                        showMessage('คัดลอกแล้ว!');
                    } catch (err) {
                        showMessage('คัดลอกไม่ได้!');
                    }
                    document.body.removeChild(textarea);
                }
            });

            clearButton.addEventListener('click', () => {
                inputTextarea.value = '';
                outputTextarea.value = '';
                processText();
            });

            function showMessage(message) {
                messageBox.textContent = message;
                messageBox.classList.add('show');
                setTimeout(() => messageBox.classList.remove('show'), 2000);
            }

            processText(); 
        });
    </script>
</body>
</html>

